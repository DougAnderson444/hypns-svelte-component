import{_ as me}from"../chunks/preload-helper-cdbd96e6.js";import{S as Ce,i as Me,s as Ie,o as Fe,K as Qe,L as ye,M as we,a as v,l as _,u as T,x as be,N as Ge,c as N,m as h,p as k,v as H,h as w,y as We,O as Xe,q as W,b as q,J as i,z as ge,P as ee,Q as te,R as Oe,f as j,t as Z,d as je,w as ve,T as qe,C as Ne,U as Ye,e as Se,g as ze,V as Ze,r as Te}from"../chunks/index-fe5e0b48.js";function xe(a,e,t){let{opts:n={}}=e,{hypnsNode:o=null}=e,r;return Fe(async()=>{r=await me(()=>import("../chunks/hypns-bundle-2151c33c.js").then(l=>l.h),[]),r.default&&(r=r.default),console.log({HyPNS:r}),n||t(0,n={persist:!0,swarmOpts:{announceLocalAddress:!0,wsProxy:["wss://hyperswarm.mauve.moe"]}});const s=new r(n);await s.init(),t(1,o=s);const E="onpagehide"in self?"pagehide":"unload";addEventListener(E,async l=>{await o.close()},{capture:!0});try{const c=(await me(()=>import("../chunks/adapter_core-919699b9.js"),[])).default}catch{console.warn("WebRTC adapter not found.")}}),Qe(async()=>{try{await o.close()}catch{console.log("Closed undefined Hypns component. ")}}),a.$$set=s=>{"opts"in s&&t(0,n=s.opts),"hypnsNode"in s&&t(1,o=s.hypnsNode)},[n,o]}class $e extends Ce{constructor(e){super(),Me(this,e,xe,null,Ie,{opts:0,hypnsNode:1})}}function He(a,e,t){const n=a.slice();return n[21]=e[t],n}function Ue(a){let e,t,n,o;function r(l){a[11](l)}var s=a[7];function E(l){let c={};return l[1]!==void 0&&(c.wallet=l[1]),{props:c}}return s&&(e=new s(E(a)),ye.push(()=>we(e,"wallet",r))),{c(){e&&be(e.$$.fragment),n=Se()},l(l){e&&We(e.$$.fragment,l),n=Se()},m(l,c){e&&ge(e,l,c),q(l,n,c),o=!0},p(l,c){const K={};if(!t&&c&2&&(t=!0,K.wallet=l[1],qe(()=>t=!1)),s!==(s=l[7])){if(e){ze();const P=e;Z(P.$$.fragment,1,0,()=>{Ne(P,1)}),je()}s?(e=new s(E(l)),ye.push(()=>we(e,"wallet",r)),be(e.$$.fragment),j(e.$$.fragment,1),ge(e,n.parentNode,n)):e=null}else s&&e.$set(K)},i(l){o||(e&&j(e.$$.fragment,l),o=!0)},o(l){e&&Z(e.$$.fragment,l),o=!1},d(l){l&&w(n),e&&Ne(e,l)}}}function Ve(a){let e;return{c(){e=T("hypnsNode is loaded!")},l(t){e=H(t,"hypnsNode is loaded!")},m(t,n){q(t,e,n)},d(t){t&&w(e)}}}function Ae(a){let e,t=a[5],n=[];for(let o=0;o<t.length;o+=1)n[o]=Be(He(a,t,o));return{c(){e=_("ul");for(let o=0;o<n.length;o+=1)n[o].c()},l(o){e=h(o,"UL",{});var r=k(e);for(let s=0;s<n.length;s+=1)n[s].l(r);r.forEach(w)},m(o,r){q(o,e,r);for(let s=0;s<n.length;s+=1)n[s].m(e,null)},p(o,r){if(r&32){t=o[5];let s;for(s=0;s<t.length;s+=1){const E=He(o,t,s);n[s]?n[s].p(E,r):(n[s]=Be(E),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}},d(o){o&&w(e),Ze(n,o)}}}function Be(a){let e,t=a[21].publicKey.toString("hex")+"",n,o;return{c(){e=_("li"),n=T(t),o=v(),this.h()},l(r){e=h(r,"LI",{style:!0});var s=k(e);n=H(s,t),o=N(s),s.forEach(w),this.h()},h(){Te(e,"text-transform","uppercase"),Te(e,"list-style","none")},m(r,s){q(r,e,s),i(e,n),i(e,o)},p(r,s){s&32&&t!==(t=r[21].publicKey.toString("hex")+"")&&ve(n,t)},d(r){r&&w(e)}}}function et(a){let e,t,n,o,r,s,E,l,c,K,P,D,V,A,R,I,z,J,O,Q,B,d,f,S,x,U,ne,le,se,$,oe,ae,ie,re,ue,G,fe,ce,F,pe,_e,he,X,C,de,Ee,p=a[7]&&Ue(a);function Je(u){a[12](u)}let Pe={opts:a[8]};a[0]!==void 0&&(Pe.hypnsNode=a[0]),c=new $e({props:Pe}),ye.push(()=>we(c,"hypnsNode",Je));let g=a[0]&&Ve(),b=a[5]&&a[5].length>0&&Ae(a);return{c(){p&&p.c(),e=v(),t=_("main"),n=_("h1"),o=T("Hello "),r=T(a[2]),s=T("!"),E=v(),l=_("div"),be(c.$$.fragment),P=v(),D=_("p"),g&&g.c(),V=v(),A=_("div"),R=_("form"),I=T(`Enter anything here to share with your connections:
				`),z=_("br"),J=v(),O=_("input"),Q=v(),B=_("div"),d=_("form"),f=T(`Paste you're friend's publicKey below to follow updates:
				`),S=_("br"),x=v(),U=_("input"),ne=v(),le=_("br"),se=v(),$=T(a[4]),oe=v(),ae=_("br"),ie=v(),re=_("br"),ue=v(),G=_("p"),fe=T("List of your contacts:"),ce=v(),F=_("p"),b&&b.c(),pe=T(`
		Recent Updates:`),_e=_("br"),he=v(),X=new Ge(!1),this.h()},l(u){p&&p.l(u),e=N(u),t=h(u,"MAIN",{class:!0});var m=k(t);n=h(m,"H1",{class:!0});var M=k(n);o=H(M,"Hello "),r=H(M,a[2]),s=H(M,"!"),M.forEach(w),E=N(m),l=h(m,"DIV",{});var y=k(l);We(c.$$.fragment,y),P=N(y),D=h(y,"P",{});var Re=k(D);g&&g.l(Re),Re.forEach(w),V=N(y),A=h(y,"DIV",{});var ke=k(A);R=h(ke,"FORM",{class:!0});var Y=k(R);I=H(Y,`Enter anything here to share with your connections:
				`),z=h(Y,"BR",{}),J=N(Y),O=h(Y,"INPUT",{type:!0}),Y.forEach(w),ke.forEach(w),Q=N(y),B=h(y,"DIV",{});var Le=k(B);d=h(Le,"FORM",{class:!0});var L=k(d);f=H(L,`Paste you're friend's publicKey below to follow updates:
				`),S=h(L,"BR",{}),x=N(L),U=h(L,"INPUT",{type:!0}),ne=N(L),le=h(L,"BR",{}),se=N(L),$=H(L,a[4]),oe=N(L),ae=h(L,"BR",{}),L.forEach(w),Le.forEach(w),ie=N(y),re=h(y,"BR",{}),ue=N(y),G=h(y,"P",{});var Ke=k(G);fe=H(Ke,"List of your contacts:"),Ke.forEach(w),ce=N(y),F=h(y,"P",{});var De=k(F);b&&b.l(De),De.forEach(w),pe=H(y,`
		Recent Updates:`),_e=h(y,"BR",{}),he=N(y),X=Xe(y,!1),y.forEach(w),m.forEach(w),this.h()},h(){W(n,"class","svelte-1tky8bj"),W(O,"type","text"),W(R,"class","form"),W(U,"type","text"),W(d,"class","form"),X.a=null,W(t,"class","svelte-1tky8bj")},m(u,m){p&&p.m(u,m),q(u,e,m),q(u,t,m),i(t,n),i(n,o),i(n,r),i(n,s),i(t,E),i(t,l),ge(c,l,null),i(l,P),i(l,D),g&&g.m(D,null),i(l,V),i(l,A),i(A,R),i(R,I),i(R,z),i(R,J),i(R,O),ee(O,a[6]),i(l,Q),i(l,B),i(B,d),i(d,f),i(d,S),i(d,x),i(d,U),ee(U,a[4]),i(d,ne),i(d,le),i(d,se),i(d,$),i(d,oe),i(d,ae),i(l,ie),i(l,re),i(l,ue),i(l,G),i(G,fe),i(l,ce),i(l,F),b&&b.m(F,null),i(l,pe),i(l,_e),i(l,he),X.m(a[3],l),C=!0,de||(Ee=[te(O,"input",a[13]),te(R,"submit",Oe(a[10])),te(U,"input",a[14]),te(d,"submit",Oe(a[9]))],de=!0)},p(u,[m]){u[7]?p?(p.p(u,m),m&128&&j(p,1)):(p=Ue(u),p.c(),j(p,1),p.m(e.parentNode,e)):p&&(ze(),Z(p,1,1,()=>{p=null}),je()),(!C||m&4)&&ve(r,u[2]);const M={};!K&&m&1&&(K=!0,M.hypnsNode=u[0],qe(()=>K=!1)),c.$set(M),u[0]?g||(g=Ve(),g.c(),g.m(D,null)):g&&(g.d(1),g=null),m&64&&O.value!==u[6]&&ee(O,u[6]),m&16&&U.value!==u[4]&&ee(U,u[4]),(!C||m&16)&&ve($,u[4]),u[5]&&u[5].length>0?b?b.p(u,m):(b=Ae(u),b.c(),b.m(F,null)):b&&(b.d(1),b=null),(!C||m&8)&&X.p(u[3])},i(u){C||(j(p),j(c.$$.fragment,u),C=!0)},o(u){Z(p),Z(c.$$.fragment,u),C=!1},d(u){p&&p.d(u),u&&w(e),u&&w(t),Ne(c),g&&g.d(),b&&b.d(),de=!1,Ye(Ee)}}}function tt(a,e,t){let{name:n="Douglas"}=e,{hypnsNode:o=null}=e,{wallet:r=null}=e,E={persist:!0,swarmOpts:{announceLocalAddress:!0,wsProxy:["wss://hyperswarm.mauve.moe"]}},l="",c="",K=[],P="",D,V;Fe(async()=>{r||t(7,{Web3WalletMenu:V}=await me(()=>import("../chunks/index-debd3b05.js"),["_app/immutable/chunks/index-debd3b05.js","_app/immutable/assets/index-d9ef241e.css","_app/immutable/chunks/index-fe5e0b48.js","_app/immutable/chunks/preload-helper-cdbd96e6.js"]),V)});const A=async()=>{const f=await o.open({wallet:r});await f.ready(),D=f,I(D)},R=async f=>{try{const S=await o.open({keypair:{publicKey:f}});return await S.ready(),S}catch(S){console.error(S)}};function I(f){console.log("Setting up",f.publicKey.toString("hex"));const S=x=>{f.latest&&f.latest.text&&(f.latest.text,console.log("showLatest ",f.latest.text),t(3,l+=`<br/>${f.publicKey.toString("hex")}: ${f.latest.text}`))};t(5,K=[...K,f]),f.on("update",S)}const z=async()=>{console.log("addPublicKey",c);try{const f=await R(c);I(f),t(4,c="")}catch(f){console.error(f)}};function J(){D.publish({text:P}),t(6,P="")}function O(f){r=f,t(1,r)}function Q(f){o=f,t(0,o)}function B(){P=this.value,t(6,P)}function d(){c=this.value,t(4,c)}return a.$$set=f=>{"name"in f&&t(2,n=f.name),"hypnsNode"in f&&t(0,o=f.hypnsNode),"wallet"in f&&t(1,r=f.wallet)},a.$$.update=()=>{a.$$.dirty&3&&!!o&&r&&A()},[o,r,n,l,c,K,P,V,E,z,J,O,Q,B,d]}class st extends Ce{constructor(e){super(),Me(this,e,tt,et,Ie,{name:2,hypnsNode:0,wallet:1})}}export{st as default};
