import{_ as me}from"../chunks/preload-helper-cdbd96e6.js";import{S as Ce,i as Me,s as Fe,o as Ie,K as Qe,L as ye,M as we,a as v,l as h,u as T,x as be,N as Ge,c as N,m as _,p as k,v as H,h as w,y as We,O as Xe,q as W,b as q,J as i,z as ge,P as ee,Q as te,R as De,f as j,t as Z,d as je,w as ve,T as qe,C as Ne,U as Ye,e as Oe,g as ze,V as Ze,r as Te}from"../chunks/index-fe5e0b48.js";function xe(a,e,t){let{opts:n={}}=e,{hypnsNode:o=null}=e,u;return Ie(async()=>{u=(await me(()=>import("../chunks/hypns-bundle-2151c33c.js").then(l=>l.h),[])).default,n||t(0,n={persist:!0,swarmOpts:{announceLocalAddress:!0,wsProxy:["wss://hyperswarm.mauve.moe"]}});const s=new u(n);await s.init(),t(1,o=s);const E="onpagehide"in self?"pagehide":"unload";addEventListener(E,async l=>{await o.close()},{capture:!0});try{const c=(await me(()=>import("../chunks/adapter_core-919699b9.js"),[])).default}catch{console.warn("WebRTC adapter not found.")}}),Qe(async()=>{try{await o.close()}catch{console.log("Closed undefined Hypns component. ")}}),a.$$set=s=>{"opts"in s&&t(0,n=s.opts),"hypnsNode"in s&&t(1,o=s.hypnsNode)},[n,o]}class $e extends Ce{constructor(e){super(),Me(this,e,xe,null,Fe,{opts:0,hypnsNode:1})}}function He(a,e,t){const n=a.slice();return n[21]=e[t],n}function Ue(a){let e,t,n,o;function u(l){a[11](l)}var s=a[7];function E(l){let c={};return l[1]!==void 0&&(c.wallet=l[1]),{props:c}}return s&&(e=new s(E(a)),ye.push(()=>we(e,"wallet",u))),{c(){e&&be(e.$$.fragment),n=Oe()},l(l){e&&We(e.$$.fragment,l),n=Oe()},m(l,c){e&&ge(e,l,c),q(l,n,c),o=!0},p(l,c){const S={};if(!t&&c&2&&(t=!0,S.wallet=l[1],qe(()=>t=!1)),s!==(s=l[7])){if(e){ze();const P=e;Z(P.$$.fragment,1,0,()=>{Ne(P,1)}),je()}s?(e=new s(E(l)),ye.push(()=>we(e,"wallet",u)),be(e.$$.fragment),j(e.$$.fragment,1),ge(e,n.parentNode,n)):e=null}else s&&e.$set(S)},i(l){o||(e&&j(e.$$.fragment,l),o=!0)},o(l){e&&Z(e.$$.fragment,l),o=!1},d(l){l&&w(n),e&&Ne(e,l)}}}function Ve(a){let e;return{c(){e=T("hypnsNode is loaded!")},l(t){e=H(t,"hypnsNode is loaded!")},m(t,n){q(t,e,n)},d(t){t&&w(e)}}}function Ae(a){let e,t=a[5],n=[];for(let o=0;o<t.length;o+=1)n[o]=Be(He(a,t,o));return{c(){e=h("ul");for(let o=0;o<n.length;o+=1)n[o].c()},l(o){e=_(o,"UL",{});var u=k(e);for(let s=0;s<n.length;s+=1)n[s].l(u);u.forEach(w)},m(o,u){q(o,e,u);for(let s=0;s<n.length;s+=1)n[s].m(e,null)},p(o,u){if(u&32){t=o[5];let s;for(s=0;s<t.length;s+=1){const E=He(o,t,s);n[s]?n[s].p(E,u):(n[s]=Be(E),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}},d(o){o&&w(e),Ze(n,o)}}}function Be(a){let e,t=a[21].publicKey.toString("hex")+"",n,o;return{c(){e=h("li"),n=T(t),o=v(),this.h()},l(u){e=_(u,"LI",{style:!0});var s=k(e);n=H(s,t),o=N(s),s.forEach(w),this.h()},h(){Te(e,"text-transform","uppercase"),Te(e,"list-style","none")},m(u,s){q(u,e,s),i(e,n),i(e,o)},p(u,s){s&32&&t!==(t=u[21].publicKey.toString("hex")+"")&&ve(n,t)},d(u){u&&w(e)}}}function et(a){let e,t,n,o,u,s,E,l,c,S,P,D,V,A,R,F,z,J,O,Q,B,d,r,L,x,U,ne,le,se,$,oe,ae,ie,re,ue,G,fe,ce,I,pe,he,_e,X,C,de,Ee,p=a[7]&&Ue(a);function Je(f){a[12](f)}let Pe={opts:a[8]};a[0]!==void 0&&(Pe.hypnsNode=a[0]),c=new $e({props:Pe}),ye.push(()=>we(c,"hypnsNode",Je));let g=a[0]&&Ve(),b=a[5]&&a[5].length>0&&Ae(a);return{c(){p&&p.c(),e=v(),t=h("main"),n=h("h1"),o=T("Hello "),u=T(a[2]),s=T("!"),E=v(),l=h("div"),be(c.$$.fragment),P=v(),D=h("p"),g&&g.c(),V=v(),A=h("div"),R=h("form"),F=T(`Enter anything here to share with your connections:
				`),z=h("br"),J=v(),O=h("input"),Q=v(),B=h("div"),d=h("form"),r=T(`Paste you're friend's publicKey below to follow updates:
				`),L=h("br"),x=v(),U=h("input"),ne=v(),le=h("br"),se=v(),$=T(a[4]),oe=v(),ae=h("br"),ie=v(),re=h("br"),ue=v(),G=h("p"),fe=T("List of your contacts:"),ce=v(),I=h("p"),b&&b.c(),pe=T(`
		Recent Updates:`),he=h("br"),_e=v(),X=new Ge(!1),this.h()},l(f){p&&p.l(f),e=N(f),t=_(f,"MAIN",{class:!0});var m=k(t);n=_(m,"H1",{class:!0});var M=k(n);o=H(M,"Hello "),u=H(M,a[2]),s=H(M,"!"),M.forEach(w),E=N(m),l=_(m,"DIV",{});var y=k(l);We(c.$$.fragment,y),P=N(y),D=_(y,"P",{});var Re=k(D);g&&g.l(Re),Re.forEach(w),V=N(y),A=_(y,"DIV",{});var ke=k(A);R=_(ke,"FORM",{class:!0});var Y=k(R);F=H(Y,`Enter anything here to share with your connections:
				`),z=_(Y,"BR",{}),J=N(Y),O=_(Y,"INPUT",{type:!0}),Y.forEach(w),ke.forEach(w),Q=N(y),B=_(y,"DIV",{});var Le=k(B);d=_(Le,"FORM",{class:!0});var K=k(d);r=H(K,`Paste you're friend's publicKey below to follow updates:
				`),L=_(K,"BR",{}),x=N(K),U=_(K,"INPUT",{type:!0}),ne=N(K),le=_(K,"BR",{}),se=N(K),$=H(K,a[4]),oe=N(K),ae=_(K,"BR",{}),K.forEach(w),Le.forEach(w),ie=N(y),re=_(y,"BR",{}),ue=N(y),G=_(y,"P",{});var Ke=k(G);fe=H(Ke,"List of your contacts:"),Ke.forEach(w),ce=N(y),I=_(y,"P",{});var Se=k(I);b&&b.l(Se),Se.forEach(w),pe=H(y,`
		Recent Updates:`),he=_(y,"BR",{}),_e=N(y),X=Xe(y,!1),y.forEach(w),m.forEach(w),this.h()},h(){W(n,"class","svelte-1tky8bj"),W(O,"type","text"),W(R,"class","form"),W(U,"type","text"),W(d,"class","form"),X.a=null,W(t,"class","svelte-1tky8bj")},m(f,m){p&&p.m(f,m),q(f,e,m),q(f,t,m),i(t,n),i(n,o),i(n,u),i(n,s),i(t,E),i(t,l),ge(c,l,null),i(l,P),i(l,D),g&&g.m(D,null),i(l,V),i(l,A),i(A,R),i(R,F),i(R,z),i(R,J),i(R,O),ee(O,a[6]),i(l,Q),i(l,B),i(B,d),i(d,r),i(d,L),i(d,x),i(d,U),ee(U,a[4]),i(d,ne),i(d,le),i(d,se),i(d,$),i(d,oe),i(d,ae),i(l,ie),i(l,re),i(l,ue),i(l,G),i(G,fe),i(l,ce),i(l,I),b&&b.m(I,null),i(l,pe),i(l,he),i(l,_e),X.m(a[3],l),C=!0,de||(Ee=[te(O,"input",a[13]),te(R,"submit",De(a[10])),te(U,"input",a[14]),te(d,"submit",De(a[9]))],de=!0)},p(f,[m]){f[7]?p?(p.p(f,m),m&128&&j(p,1)):(p=Ue(f),p.c(),j(p,1),p.m(e.parentNode,e)):p&&(ze(),Z(p,1,1,()=>{p=null}),je()),(!C||m&4)&&ve(u,f[2]);const M={};!S&&m&1&&(S=!0,M.hypnsNode=f[0],qe(()=>S=!1)),c.$set(M),f[0]?g||(g=Ve(),g.c(),g.m(D,null)):g&&(g.d(1),g=null),m&64&&O.value!==f[6]&&ee(O,f[6]),m&16&&U.value!==f[4]&&ee(U,f[4]),(!C||m&16)&&ve($,f[4]),f[5]&&f[5].length>0?b?b.p(f,m):(b=Ae(f),b.c(),b.m(I,null)):b&&(b.d(1),b=null),(!C||m&8)&&X.p(f[3])},i(f){C||(j(p),j(c.$$.fragment,f),C=!0)},o(f){Z(p),Z(c.$$.fragment,f),C=!1},d(f){p&&p.d(f),f&&w(e),f&&w(t),Ne(c),g&&g.d(),b&&b.d(),de=!1,Ye(Ee)}}}function tt(a,e,t){let{name:n="Douglas"}=e,{hypnsNode:o}=e,{wallet:u=null}=e,E={persist:!0,swarmOpts:{announceLocalAddress:!0,wsProxy:["wss://hyperswarm.mauve.moe"]}},l="",c="",S=[],P="",D,V;Ie(async()=>{u||t(7,{Web3WalletMenu:V}=await me(()=>import("../chunks/index-4b4f06e9.js"),["_app/immutable/chunks/index-4b4f06e9.js","_app/immutable/assets/index-d9ef241e.css","_app/immutable/chunks/index-fe5e0b48.js","_app/immutable/chunks/preload-helper-cdbd96e6.js"]),V)});const A=async()=>{const r=await o.open({wallet:u});await r.ready(),D=r,F(D)},R=async r=>{try{const L=await o.open({keypair:{publicKey:r}});return await L.ready(),L}catch(L){console.error(L)}};function F(r){console.log("Setting up",r.publicKey.toString("hex"));const L=x=>{r.latest&&r.latest.text&&(r.latest.text,console.log("showLatest ",r.latest.text),t(3,l+=`<br/>${r.publicKey.toString("hex")}: ${r.latest.text}`))};t(5,S=[...S,r]),console.log("Showing latest ",r.latest),L(r.latest),r.on("update",L)}const z=async()=>{console.log("addPublicKey",c);try{const r=await R(c);F(r),t(4,c="")}catch(r){console.error(r)}};function J(){D.publish({text:P}),t(6,P="")}function O(r){u=r,t(1,u)}function Q(r){o=r,t(0,o)}function B(){P=this.value,t(6,P)}function d(){c=this.value,t(4,c)}return a.$$set=r=>{"name"in r&&t(2,n=r.name),"hypnsNode"in r&&t(0,o=r.hypnsNode),"wallet"in r&&t(1,u=r.wallet)},a.$$.update=()=>{a.$$.dirty&3&&!!o&&u&&A()},[o,u,n,l,c,S,P,V,E,z,J,O,Q,B,d]}class st extends Ce{constructor(e){super(),Me(this,e,tt,et,Fe,{name:2,hypnsNode:0,wallet:1})}}export{st as default};
